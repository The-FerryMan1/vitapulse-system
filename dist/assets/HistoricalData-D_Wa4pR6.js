const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TableChart-98vnBCXr.js","assets/index-DoXJ7e5N.js","assets/index-DWTketqF.js","assets/index-g7eDV2oR.css","assets/TableComp-8rxnrOlw.js","assets/Pagination.vue_vue_type_script_setup_true_lang-CvqWSGbF.js","assets/Table.vue_vue_type_script_setup_true_lang-BtKBs-xT.js","assets/HeadUlo.vue_vue_type_script_setup_true_lang-50RawKgm.js","assets/Input.vue_vue_type_script_setup_true_lang-BzFFVISg.js","assets/FilterDate-B0nba7_k.js","assets/Select.vue_vue_type_script_setup_true_lang-CEwvS3Dd.js","assets/Chip.vue_vue_type_script_setup_true_lang-BXohqn5E.js","assets/useFormControl-gs30PcZv.js","assets/nullish-CHIgUVhi.js"])))=>i.map(i=>d[i]);
import{g as U,q as P,r as i,j as A,z as R,n as F,p as _,Y as L,h as v,w as N,a as m,c as E,k as g,b as B,m as y,$ as w,e as j,a0 as C,o as d}from"./index-DWTketqF.js";import{S,E as x}from"./ErrorComp-DK4_yT8q.js";import{_ as H}from"./adminLayout.vue_vue_type_script_setup_true_lang-BE6WYtnb.js";import{u as z}from"./UseBp-CkOYoTXr.js";import{_ as M}from"./SelectMenu.vue_vue_type_script_setup_true_lang-q2-KM9nG.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-50RawKgm.js";import"./websockets-EQf3t9ox.js";import"./jspdf.es.min-BdZNkiNU.js";import"./Chip.vue_vue_type_script_setup_true_lang-BXohqn5E.js";import"./Input.vue_vue_type_script_setup_true_lang-BzFFVISg.js";import"./useFormControl-gs30PcZv.js";import"./VisuallyHiddenInput-CbuJE-8R.js";const Y={class:"flex gap-2 items-center"},G={key:0,class:"flex gap-4 mt-3 px-3 items-end justify-start w-full"},J={class:"w-full p-2"},K={key:1},Q={class:"w-full p-2"},de=U({__name:"HistoricalData",setup(W){const f=F(),l=L();P().auth;const{getBp:X,getBpCustom:$}=z(),q=w({loader:()=>C(()=>import("./TableChart-98vnBCXr.js"),__vite__mapDeps([0,1,2,3])),loadingComponent:S,delay:200,errorComponent:x,timeout:3e3}),I=w({loader:()=>C(()=>import("./TableComp-8rxnrOlw.js"),__vite__mapDeps([4,5,2,3,6,7,8])),loadingComponent:S,delay:200,errorComponent:x,timeout:3e3}),O=w({loader:()=>C(()=>import("./FilterDate-B0nba7_k.js"),__vite__mapDeps([9,10,2,3,11,7,12,13])),loadingComponent:S,delay:200,errorComponent:x,timeout:3e3}),o=i("daily"),D=new Date(Date.now()),c=i(D.toISOString()),p=i(D.toISOString());A(o,async()=>{(o==null?void 0:o.value)!=="custom"&&(f.replace({query:{filter:o.value}}),console.log(l.query.filter))});const n=i(null),a=i(null),s=i(0);A(s,()=>{a.value=null}),R(async()=>{var u,e;if(f.replace({query:{filter:"daily"}}),o.value!=="custom"&&s.value!==0)try{const{data:t}=await _.get(`/auth/admin/readings/${s.value}?filter=${(e=(u=l==null?void 0:l.query)==null?void 0:u.filter)==null?void 0:e.toString()}`);a.value=t}catch(t){console.log(t)}if(n.value===null||n.value.length<0)try{const{data:t}=await _.get("/auth/admin/users");n.value=t}catch(t){console.log(t),n.value=null}});const T=async()=>{var u,e;if(o.value!=="custom"){const{data:t}=await _.get(`/auth/admin/readings/${s.value}?filter=${(e=(u=l==null?void 0:l.query)==null?void 0:u.filter)==null?void 0:e.toString()}`);a.value=t;return}if(o.value==="custom"&&p.value&&c.value){f.replace({query:{filter:"custom",from:new Date(p.value).toISOString(),to:new Date(c.value).toISOString()}}),await $(p.value,c.value);return}};return(u,e)=>{const t=j;return d(),v(H,null,{default:N(()=>{var b,k,V,h;return[e[6]||(e[6]=m("h1",{class:"text-2xl mx-2 my-10 font-bold self-start"},"Historical readings",-1)),m("div",Y,[e[4]||(e[4]=m("label",{class:"text-sm font-semibold p-2",for:""},"View blood pressure trends:",-1)),n.value?(d(),v(M,{key:0,data:n.value,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r)},null,8,["data","modelValue"])):g("",!0)]),s.value!==0?(d(),E("div",G,[B(y(O),{filter:o.value,"onUpdate:filter":e[1]||(e[1]=r=>o.value=r),"custom-from":p.value,"onUpdate:customFrom":e[2]||(e[2]=r=>p.value=r),"custom-to":c.value,"onUpdate:customTo":e[3]||(e[3]=r=>c.value=r),class:"self-end ms-auto"},null,8,["filter","custom-from","custom-to"]),B(t,{class:"shadow-xl",label:"Apply Filter",onClick:T})])):g("",!0),m("div",J,[((b=a.value)==null?void 0:b.length)!==void 0&&((k=a.value)==null?void 0:k.length)>0?(d(),v(y(q),{key:0,Data:a.value},null,8,["Data"])):(d(),E("div",K,e[5]||(e[5]=[m("p",{class:"text-center"},"No data found",-1)])))]),m("div",Q,[((V=a.value)==null?void 0:V.length)!==void 0&&((h=a.value)==null?void 0:h.length)>0?(d(),v(y(I),{key:0,Data:a.value},null,8,["Data"])):g("",!0)])]}),_:1})}}});export{de as default};
