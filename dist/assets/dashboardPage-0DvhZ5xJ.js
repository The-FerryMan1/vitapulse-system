const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardComp-CXcY3LTw.js","assets/Card.vue_vue_type_script_setup_true_lang-CDIXqMJ7.js","assets/index-DWTketqF.js","assets/index-g7eDV2oR.css","assets/PulseRateCard-C9oHvjq1.js","assets/InforList--LgCIlz_.js","assets/historicalData-CxmQKwch.js","assets/HeadUlo.vue_vue_type_script_setup_true_lang-50RawKgm.js","assets/ErrorComp-DK4_yT8q.js","assets/jspdf.es.min-BdZNkiNU.js","assets/websockets-EQf3t9ox.js","assets/UseBp-CkOYoTXr.js","assets/ExportToCsv.vue_vue_type_script_setup_true_lang-p3CQPpr_.js"])))=>i.map(i=>d[i]);
import{g as W,u as z,q,r as B,z as J,Z as M,h as Z,w as c,b as s,d as f,c as v,k as j,a as n,t as F,m as l,$ as u,V as G,e as H,a0 as d,o as m}from"./index-DWTketqF.js";import{_ as K}from"./Container.vue_vue_type_script_setup_true_lang-ALCPKHsn.js";import{S as p,E as _}from"./ErrorComp-DK4_yT8q.js";import{_ as Q}from"./userLayout.vue_vue_type_script_setup_true_lang-nfIJsLjf.js";import{u as X}from"./UseBp-CkOYoTXr.js";import{s as Y,g as D}from"./websockets-EQf3t9ox.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-50RawKgm.js";import"./jspdf.es.min-BdZNkiNU.js";const ee={key:0},oe={key:1,class:"my-5 flex lg:flex-nowrap flex-wrap w-full gap-4"},te={key:2,class:"p-3 my-2 bg-amber-500 text-black rounded-sm shadow-sm flex items-center gap-5"},se={class:"flex flex-col"},ae={class:"text-lg font-semibold flex gap-3 items-center"},_e=W({__name:"dashboardPage",setup(ne){const g=z(),{getUser:U}=q(),{postBp:N}=X(),T=u({loader:()=>d(()=>import("./CardComp-CXcY3LTw.js"),__vite__mapDeps([0,1,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),I=u({loader:()=>d(()=>import("./PulseRateCard-C9oHvjq1.js"),__vite__mapDeps([4,1,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),L=u({loader:()=>d(()=>import("./InforList--LgCIlz_.js"),__vite__mapDeps([5,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),$=u({loader:()=>d(()=>import("./historicalData-CxmQKwch.js"),__vite__mapDeps([6,2,3,7,8,9,10,11,12])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3});let y=Date.now();const a=B(null),t=B(null);let o=null;const b=()=>(o=Y("bp"),o.onopen=i=>{console.log("WebSocket connection established")},o.onmessage=async i=>{const e=JSON.parse(i.data);t.value=e;const r=Date.now();e.diastolic!==254&&(e==null?void 0:e.systolic)!==254&&e.pulseRate!==254&&r-y>=3e3&&(await N(e.systolic,e.diastolic,e.pulseRate,e.date)?(g.add({title:"Saved",description:"Readings saved",color:"success"}),y=r):g.add({title:"Skipped",description:"Data is already saved",color:"info"}))},o.onclose=()=>{console.log("Websocket connection has been closed")},o.onerror=i=>{console.log(i)},o);J(async()=>{a.value=await U(),b()}),M(()=>{o==null||o.close(),o=null});const O=()=>{o&&(o.close(),o=null),b()};return(i,e)=>{const r=G,C=H,k=K;return m(),Z(Q,null,{default:c(()=>[s(k,{class:"py-4 px-2 w-full mt-4"},{default:c(()=>{var x,R,S,h,A,P,w,E,V;return[f(F(console.log(a.value))+" ",1),a.value?(m(),v("div",ee,[s(l(L),{auth:a.value},null,8,["auth"])])):j("",!0),e[3]||(e[3]=n("h1",{class:"text-3xl my-10 font-bold self-start"},"Real-time monitor",-1)),(x=t.value)!=null&&x.diastolic&&((R=t.value)!=null&&R.systolic)&&((S=t.value)!=null&&S.pulseRate)&&((h=a.value)!=null&&h.birthday)?(m(),v("div",oe,[s(l(T),{bpAndPulse:{systolic:(A=t.value)==null?void 0:A.systolic,diastolic:(P=t.value)==null?void 0:P.diastolic,age:Number(l(D)(String((w=a.value)==null?void 0:w.birthday))),pulse:(E=t.value)==null?void 0:E.pulseRate}},null,8,["bpAndPulse"]),s(l(I),{PulseRate:{pulse_rate:t.value.pulseRate,age:Number(l(D)(String((V=a.value)==null?void 0:V.birthday)))}},null,8,["PulseRate"])])):(m(),v("div",te,[n("div",se,[n("p",ae,[s(r,{name:"i-lucide-unplug",class:"size-5"}),e[0]||(e[0]=f("Real-time connection lost "))]),e[1]||(e[1]=n("ul",{class:"list-item list-disc ms-15"},[n("li",{class:""},"Check your internet connection"),n("li",null,"Check your device")],-1))]),s(C,{onClick:O,class:"bg-amber-300 ms-auto text-black",icon:"i-lucide-plug-zap"},{default:c(()=>e[2]||(e[2]=[f("Reconnect ")])),_:1})]))]}),_:1}),s(k,null,{default:c(()=>[s(l($))]),_:1})]),_:1})}}});export{_e as default};
