const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CardComp-B9kv4ZHe.js","assets/Card.vue_vue_type_script_setup_true_lang-qz00p7XJ.js","assets/index-DmQ4lrpB.js","assets/index-g7eDV2oR.css","assets/PulseRateCard-B7lVKLFB.js","assets/InforList-CYy8mYWP.js","assets/historicalData-DB1t8jNO.js","assets/HeadUlo.vue_vue_type_script_setup_true_lang-DB_JGBnF.js","assets/ErrorComp-B7XDKhCJ.js","assets/jspdf.es.min-Hh1kBT-_.js","assets/websockets-CTRspls3.js","assets/UseBp-BbUP3lGH.js","assets/ExportToCsv.vue_vue_type_script_setup_true_lang-DjyRtlnK.js"])))=>i.map(i=>d[i]);
import{g as W,u as z,q,r as D,v as J,y as M,h as j,w as c,b as s,d as f,c as v,k as F,a as n,t as G,m as l,z as u,A as H,e as K,B as d,o as m}from"./index-DmQ4lrpB.js";import{_ as Q}from"./Container.vue_vue_type_script_setup_true_lang-BWQXetiZ.js";import{S as p,E as _}from"./ErrorComp-B7XDKhCJ.js";import{_ as X}from"./userLayout.vue_vue_type_script_setup_true_lang-8jzvR6YR.js";import{u as Y}from"./UseBp-BbUP3lGH.js";import{s as Z,g as U}from"./websockets-CTRspls3.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-DB_JGBnF.js";import"./jspdf.es.min-Hh1kBT-_.js";const ee={key:0},oe={key:1,class:"my-5 flex lg:flex-nowrap flex-wrap w-full gap-4"},te={key:2,class:"p-3 my-2 bg-amber-500 text-black rounded-sm shadow-sm flex items-center gap-5"},se={class:"flex flex-col"},ae={class:"text-lg font-semibold flex gap-3 items-center"},_e=W({__name:"dashboardPage",setup(ne){const y=z(),{getUser:V}=q(),{postBp:N}=Y(),T=u({loader:()=>d(()=>import("./CardComp-B9kv4ZHe.js"),__vite__mapDeps([0,1,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),I=u({loader:()=>d(()=>import("./PulseRateCard-B7lVKLFB.js"),__vite__mapDeps([4,1,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),L=u({loader:()=>d(()=>import("./InforList-CYy8mYWP.js"),__vite__mapDeps([5,2,3])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3}),O=u({loader:()=>d(()=>import("./historicalData-DB1t8jNO.js"),__vite__mapDeps([6,2,3,7,8,9,10,11,12])),loadingComponent:p,delay:200,errorComponent:_,timeout:3e3});let g=Date.now();const a=D(null),t=D(null);let o=null;const b=()=>(o=Z("bp"),o.onopen=i=>{console.log("WebSocket connection established")},o.onmessage=async i=>{const e=JSON.parse(i.data);t.value=e;const r=Date.now();e.diastolic!==254&&(e==null?void 0:e.systolic)!==254&&e.pulseRate!==254&&r-g>=3e3&&(await N(e.systolic,e.diastolic,e.pulseRate,e.date)?(y.add({title:"Saved",description:"Readings saved",color:"success"}),g=r):y.add({title:"Skipped",description:"Data is already saved",color:"info"}))},o.onclose=()=>{console.log("Websocket connection has been closed")},o.onerror=i=>{console.log(i)},o);J(async()=>{a.value=await V(),b()}),M(()=>{o==null||o.close(),o=null});const $=()=>{o&&(o.close(),o=null),b()};return(i,e)=>{const r=H,C=K,k=Q;return m(),j(X,null,{default:c(()=>[s(k,{class:"py-4 px-2 w-full mt-4"},{default:c(()=>{var x,R,S,h,A,P,w,E,B;return[f(G(console.log(a.value))+" ",1),a.value?(m(),v("div",ee,[s(l(L),{auth:a.value},null,8,["auth"])])):F("",!0),e[3]||(e[3]=n("h1",{class:"text-3xl my-10 font-bold self-start"},"Real-time monitor",-1)),(x=t.value)!=null&&x.diastolic&&((R=t.value)!=null&&R.systolic)&&((S=t.value)!=null&&S.pulseRate)&&((h=a.value)!=null&&h.birthday)?(m(),v("div",oe,[s(l(T),{bpAndPulse:{systolic:(A=t.value)==null?void 0:A.systolic,diastolic:(P=t.value)==null?void 0:P.diastolic,age:Number(l(U)(String((w=a.value)==null?void 0:w.birthday))),pulse:(E=t.value)==null?void 0:E.pulseRate}},null,8,["bpAndPulse"]),s(l(I),{PulseRate:{pulse_rate:t.value.pulseRate,age:Number(l(U)(String((B=a.value)==null?void 0:B.birthday)))}},null,8,["PulseRate"])])):(m(),v("div",te,[n("div",se,[n("p",ae,[s(r,{name:"i-lucide-unplug",class:"size-5"}),e[0]||(e[0]=f("Real-time connection lost "))]),e[1]||(e[1]=n("ul",{class:"list-item list-disc ms-15"},[n("li",{class:""},"Check your internet connection"),n("li",null,"Check your device")],-1))]),s(C,{onClick:$,class:"bg-amber-300 ms-auto text-black",icon:"i-lucide-plug-zap"},{default:c(()=>e[2]||(e[2]=[f("Reconnect ")])),_:1})]))]}),_:1}),s(k,null,{default:c(()=>[s(l(O))]),_:1})]),_:1})}}});export{_e as default};
