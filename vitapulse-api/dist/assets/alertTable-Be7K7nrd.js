import{_ as E}from"./Pagination.vue_vue_type_script_setup_true_lang-8rQMbW_n.js";import{g as K,_ as L}from"./Table.vue_vue_type_script_setup_true_lang-D3CVJytt.js";import{_ as Y}from"./Input.vue_vue_type_script_setup_true_lang-B1V_pvvB.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-CA-6HTad.js";import{g as G,n as H,ba as J,r as d,I as F,as as M,c as k,o as I,a as n,k as O,b as p,m as o,Y as Q,t as D,F as W,ar as X,p as Z}from"./index-EnnwHpsG.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-Cx8bc3UZ.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-yGkPrJpQ.js";import"./VisuallyHiddenInput-BBo1LaOe.js";import"./Label-h-CnGbub.js";const ee={class:"flex px-4 py-3.5 w-1/2"},te={class:"px-4 py-3.5 border-t border-accented text-sm text-muted"},ae={class:"flex justify-end items-center border-t border-(--ui-border) pt-4"},ge=G({__name:"alertTable",props:{Data:{}},setup(P){const $=H(),c=q,N=P,t=J("table"),r=d(""),m=d({pageIndex:0,pageSize:5}),T=F(()=>[{id:"select",header:({table:e})=>M(c,{modelValue:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),"onUpdate:modelValue":a=>e.toggleAllPageRowsSelected(!!a),"aria-label":"Select all"}),cell:({row:e})=>M(c,{modelValue:e.getIsSelected(),"onUpdate:modelValue":a=>e.toggleSelected(!!a),"aria-label":"Select row"})},{accessorKey:"message",header:"Message",cell:({row:e})=>`${e.getValue("message")}`},{accessorKey:"timestamp",header:"Timestamp",cell:({row:e})=>new Date(e.getValue("timestamp")).toLocaleString()}]),B=d(N.Data),C=async()=>{var e,a;let i=[];(a=(e=t==null?void 0:t.value)==null?void 0:e.tableApi)==null||a.getFilteredSelectedRowModel().rows.forEach(s=>{i.push({id:X(s.original.id)})});try{await Z.post("/auth/alerts/delete",i),$.back()}catch(s){console.error(s)}},j=F(()=>B.value);return(i,e)=>{var g,u,f,b,w,_,S,v,x,y,R,V,h;const a=Y,s=L,z=E;return I(),k(W,null,[n("div",null,[n("div",ee,[p(a,{icon:"i-lucide-search",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),class:"w-full",placeholder:"search..."},null,8,["modelValue"])])]),((f=(u=(g=o(t))==null?void 0:g.tableApi)==null?void 0:u.getFilteredSelectedRowModel().rows)==null?void 0:f.length)>0?(I(),k("form",{key:0,onSubmit:Q(C,["prevent"]),class:"flex justify-end items-center"},e[4]||(e[4]=[n("button",{class:"p-2 bg-red-500 text-sm my-1 rounded-md"}," Delete selected row ",-1)]),32)):O("",!0),n("div",te,D(((w=(b=o(t))==null?void 0:b.tableApi)==null?void 0:w.getFilteredSelectedRowModel().rows.length)||0)+" of "+D(((S=(_=o(t))==null?void 0:_.tableApi)==null?void 0:S.getFilteredRowModel().rows.length)||0)+" row(s) selected. ",1),p(s,{sticky:"",pagination:m.value,"onUpdate:pagination":e[1]||(e[1]=l=>m.value=l),"global-filter":r.value,"onUpdate:globalFilter":e[2]||(e[2]=l=>r.value=l),"pagination-options":{getPaginationRowModel:o(K)()},ref_key:"table",ref:t,data:j.value,empty:"No data found",columns:T.value,class:"w-full"},null,8,["pagination","global-filter","pagination-options","data","columns"]),n("div",ae,[p(z,{"default-page":(((x=(v=o(t))==null?void 0:v.tableApi)==null?void 0:x.getState().pagination.pageIndex)||0)+1,"items-per-page":(R=(y=o(t))==null?void 0:y.tableApi)==null?void 0:R.getState().pagination.pageSize,total:(h=(V=o(t))==null?void 0:V.tableApi)==null?void 0:h.getFilteredRowModel().rows.length,"onUpdate:page":e[3]||(e[3]=l=>{var A,U;return(U=(A=o(t))==null?void 0:A.tableApi)==null?void 0:U.setPageIndex(l-1)})},null,8,["default-page","items-per-page","total"])])],64)}}});export{ge as default};
