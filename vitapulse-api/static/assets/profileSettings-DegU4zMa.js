import{_ as U}from"./Container.vue_vue_type_script_setup_true_lang-hNHJKHeU.js";import{o as k,s as u,b as S,_ as $,a as c}from"./index-BabSAffz.js";import{g as V,r as b,i as j,u as q,h as _,w as p,b as o,m as P,a as n,k as T,e as B,d as h,n as E,p as N,o as g,q as A,j as F,z as L}from"./index-CHud2kZi.js";import{_ as z}from"./Select.vue_vue_type_script_setup_true_lang-CSMjV0UF.js";import"./Input.vue_vue_type_script_setup_true_lang-CO-xKSk_.js";import{_ as I}from"./userLayout.vue_vue_type_script_setup_true_lang-B_uunOcD.js";import"./Chip.vue_vue_type_script_setup_true_lang-DmKPPPIx.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-C-qicoL-.js";import"./useFormControl-BD6P04Vv.js";import"./nullish-CHIgUVhi.js";import"./websockets-CioFJj1P.js";import"./jspdf.es.min-B249Tpl9.js";const R={class:"flex items-center self-start gap-3 justify-end w-full"},W={class:"self-end"},D=V({__name:"ChangePass",setup(C){const x=E(),y=k({Currentpassword:u().min(8),password:u().min(8),confirm:u().min(8)}).refine(w=>w.password===w.confirm,{message:"Passwords don't match",path:["confirm"]}),f=b(!1),i=b(null),t=j({Currentpassword:void 0,password:void 0,confirm:void 0}),a=q(),v=async w=>{var e,s;try{f.value=!0;const{status:l}=await N.patch("/auth/user",t,{headers:{"Content-Type":"application/json"}});if(l!==200)throw new Error("Password do not match");a.add({title:"Success",description:"Password changed",color:"success"}),x.push({name:"settings"});return}catch(l){a.add({title:"Warning",description:"Password do not match",color:"warning"}),i.value=(s=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:s.message,console.log(l)}finally{f.value=!1,t.Currentpassword=void 0,t.password=void 0,t.confirm=void 0}};return(w,e)=>{const s=B,l=S,d=U;return g(),_(d,{class:"flex justify-start items-start w-full"},{default:p(()=>[o(l,{schema:P(y),state:t,onSubmit:v,class:"md:w-full flex flex-col mt-10 w-full overflow-y-auto justify-center items-center space-y-6 p-10 dark:bg-slate-800 bg-white shadow-2xl rounded-[8px] dark:border dark:border-gray-500"},{default:p(()=>[e[4]||(e[4]=n("div",{class:"self-start text-4xl font-semibold gap-2 flex flex-col"},[n("h1",{class:""},"Change password.")],-1)),i.value?(g(),_($,{key:0,message:i.value},null,8,["message"])):T("",!0),o(c,{label:"Current password",name:"Currentpassword",required:"",type:"password",icon:"i-lucide-lock",placeholder:"************",modelValue:t.Currentpassword,"onUpdate:modelValue":e[0]||(e[0]=m=>t.Currentpassword=m)},null,8,["modelValue"]),o(c,{label:"Password",name:"password",required:"",type:"password",icon:"i-lucide-lock",placeholder:"************",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=m=>t.password=m)},null,8,["modelValue"]),o(c,{label:"Confirm Password",name:"confirm",required:"",type:"password",icon:"i-lucide-lock-keyhole",placeholder:"************",modelValue:t.confirm,"onUpdate:modelValue":e[2]||(e[2]=m=>t.confirm=m)},null,8,["modelValue"]),n("div",R,[n("div",W,[o(s,{"loading-icon":"i-lucide-loader-circle",disabled:f.value,loading:f.value,type:"submit",class:"self-end md:text-base text-sm bg-red-500 w-full"},{default:p(()=>e[3]||(e[3]=[h(" Change password")])),_:1},8,["disabled","loading"])])])]),_:1},8,["schema","state"])]),_:1})}}}),G={class:"w-full"},H={class:"flex items-center self-start gap-3 justify-end w-full"},J={class:"self-end"},K=V({__name:"settingsPage",setup(C){const x=E(),{getUser:y}=A(),f=k({name:u().min(6).max(255),email:u().email(),birthday:u().date(),sex:u(),contact:u().max(11)}),i=b(!1),t=b(null),a=j({name:void 0,email:void 0,birthday:void 0,sex:void 0,contact:void 0});F(()=>a.email,()=>{t.value=null}),L(async()=>{const e=await y();a.name=e==null?void 0:e.name,a.email=e==null?void 0:e.email,a.birthday=e==null?void 0:e.birthday,a.sex=e==null?void 0:e.sex,a.contact=e==null?void 0:e.contact});const v=q(),w=async e=>{var s,l;try{i.value=!0,await N.put("/auth/user",a,{headers:{"Content-Type":"application/json"}}),v.add({title:"Success",description:"The information has been updated",color:"success"}),x.push({name:"settings"});return}catch(d){t.value=(l=(s=d==null?void 0:d.response)==null?void 0:s.data)==null?void 0:l.message,console.log(d)}finally{i.value=!1}};return(e,s)=>{const l=z,d=B,m=S,M=U;return g(),_(M,{class:"flex justify-start items-start w-full"},{default:p(()=>[o(m,{schema:P(f),state:a,onSubmit:w,class:"md:w-full flex flex-col mt-10 w-full overflow-y-auto justify-center items-center space-y-6 p-10 dark:bg-slate-800 bg-white shadow-2xl rounded-[8px] dark:border dark:border-gray-500"},{default:p(()=>[s[7]||(s[7]=n("div",{class:"self-start text-4xl font-semibold gap-2 flex flex-col"},[n("h1",{class:""},"Account Settings."),n("small",{class:"text-lg font-light"},"Change Information")],-1)),t.value?(g(),_($,{key:0,message:t.value},null,8,["message"])):T("",!0),o(c,{label:"Name",name:"name",required:"",type:"text",icon:"i-lucide-circle-user",placeholder:"Enter your Name",modelValue:a.name,"onUpdate:modelValue":s[0]||(s[0]=r=>a.name=r)},null,8,["modelValue"]),o(c,{label:"Email",name:"email",required:"",type:"email",icon:"i-lucide-mail",placeholder:"Enter your valid email",disable:!0,modelValue:a.email,"onUpdate:modelValue":s[1]||(s[1]=r=>a.email=r)},null,8,["modelValue"]),o(c,{label:"Birthday",name:"birthday",required:"",type:"date",icon:"i-lucide-calendar",placeholder:"Enter your birthday",modelValue:a.birthday,"onUpdate:modelValue":s[2]||(s[2]=r=>a.birthday=r),min:"1",max:"150"},null,8,["modelValue"]),n("div",G,[s[5]||(s[5]=n("label",{for:"",class:"text-semibold"},[h("Sex "),n("span",{class:"text-red-500"},"*")],-1)),o(l,{icon:"i-lucide-venus-and-mars",class:"w-full",modelValue:a.sex,"onUpdate:modelValue":s[3]||(s[3]=r=>a.sex=r),items:["Male","Female"]},null,8,["modelValue"])]),o(c,{label:"Contact",name:"contact",required:"",type:"text",icon:"i-lucide-contact",placeholder:"Enter your Age",modelValue:a.contact,"onUpdate:modelValue":s[4]||(s[4]=r=>a.contact=r)},null,8,["modelValue"]),n("div",H,[n("div",J,[o(d,{"loading-icon":"i-lucide-loader-circle",disabled:i.value,loading:i.value,type:"submit",class:"self-end md:text-base text-sm bg-red-500 w-full"},{default:p(()=>s[6]||(s[6]=[h(" Save")])),_:1},8,["disabled","loading"])])])]),_:1},8,["schema","state"])]),_:1})}}}),O={class:"flex flex-col"},ie=V({__name:"profileSettings",setup(C){return(x,y)=>(g(),_(I,null,{default:p(()=>[n("div",O,[o(K),o(D)])]),_:1}))}});export{ie as default};
