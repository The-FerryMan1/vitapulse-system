import{_ as V}from"./Container.vue_vue_type_script_setup_true_lang-hNHJKHeU.js";import{z as _,b as $,_ as q,a as U}from"./index-BabSAffz.js";import{g as h,u as B,q as S,r as i,i as j,h as w,w as t,b as a,m as N,a as r,k as g,c as E,d,e as T,p as F,o as c}from"./index-CHud2kZi.js";import{_ as M}from"./defaultLayout.vue_vue_type_script_setup_true_lang-BjzrHeKN.js";import"./Input.vue_vue_type_script_setup_true_lang-CO-xKSk_.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-C-qicoL-.js";const z={key:1,class:"self-start text-base"},A={class:"flex items-center self-start gap-3 justify-end w-full"},G={class:"self-end"},X=h({__name:"resetPassword",setup(L){const o=B(),{auth:D,sendResetCode:b,getUser:H}=S(),n=i(!1),m=i(!1),u=i(null),x=_.object({email:_.string().email()}),s=j({email:void 0}),y=async l=>{try{await b(l.data.email),o.add({title:"Passoword Reset",description:"Password Reset sent",color:"success"}),n.value=!0}catch(e){console.log(e),o.add({title:"Passoword Reset",description:"Password Reset failed",color:"warning"})}},v=async l=>{try{await F.post("/password-reset/resend-request",{email:l},{headers:{"Content-Type":"application/json"}}),o.add({title:"Passoword Reset",description:"Password Reset sent",color:"success"}),n.value=!0}catch(e){console.log(e),o.add({title:"Passoword Reset",description:"Password Reset failed",color:"warning"})}};return(l,e)=>{const k=q,R=U,f=T,P=$,C=V;return c(),w(M,null,{default:t(()=>[a(C,null,{default:t(()=>[a(P,{schema:N(x),state:s,onSubmit:y,class:"md:w-full flex flex-col mt-10 w-full overflow-y-auto justify-center items-center space-y-6 p-10 dark:bg-slate-800 bg-white shadow-2xl rounded-[8px] dark:border dark:border-gray-500"},{default:t(()=>[e[5]||(e[5]=r("div",{class:"self-start text-4xl font-semibold gap-2 flex flex-col"},[r("h1",{class:""},"Reset Password.")],-1)),u.value?(c(),w(k,{key:0,message:u.value},null,8,["message"])):g("",!0),a(R,{label:"Email",name:"email",required:"",type:"email",icon:"i-lucide-mail",placeholder:"Enter your email",modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=p=>s.email=p)},null,8,["modelValue"]),n.value&&s.email?(c(),E("small",z,[e[3]||(e[3]=d("Request sent! ")),a(f,{onClick:e[1]||(e[1]=p=>v(s.email)),type:"button",variant:"link",class:"underline"},{default:t(()=>e[2]||(e[2]=[d("resend request")])),_:1})])):g("",!0),r("div",A,[r("div",G,[a(f,{"loading-icon":"i-lucide-loader-circle",disabled:m.value,loading:m.value,type:"submit",class:"self-end md:text-base text-sm bg-red-500 w-full"},{default:t(()=>e[4]||(e[4]=[d(" Send reset request")])),_:1},8,["disabled","loading"])])])]),_:1},8,["schema","state"])]),_:1})]),_:1})}}});export{X as default};
