import{_ as k}from"./Container.vue_vue_type_script_setup_true_lang-hNHJKHeU.js";import{o as V,s as f,b as P,_ as C,a as p}from"./index-BabSAffz.js";import{g as $,Y as j,r as w,i as T,u as U,h as _,w as l,b as t,m as B,a as d,k as N,e as R,d as S,p as q,n as F,o as g}from"./index-CHud2kZi.js";import{_ as A}from"./defaultLayout.vue_vue_type_script_setup_true_lang-BjzrHeKN.js";import"./Input.vue_vue_type_script_setup_true_lang-CO-xKSk_.js";import"./HeadUlo.vue_vue_type_script_setup_true_lang-C-qicoL-.js";const E={class:"flex items-center self-start gap-3 justify-end w-full"},L={class:"self-end"},I=$({__name:"resetPassForm",setup(M){const b=j(),x=F(),y=b.params.token,h=V({password:f().min(8),confirm:f().min(8)}).refine(a=>a.password===a.confirm,{message:"Passwords don't match",path:["confirm"]}),r=w(!1),i=w(null),o=T({password:void 0,confirm:void 0}),u=U(),v=async a=>{var s,n;try{r.value=!0;const e=a.data.password,{status:c}=await q.post(`/password-reset/${y}`,{password:e},{headers:{"Content-Type":"application/json"}});if(c!==200)throw new Error("Password do not match");u.add({title:"Success",description:"Password changed",color:"success"}),x.push({name:"login"});return}catch(e){u.add({title:"Warning",description:"Password do not match",color:"warning"}),i.value=(n=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:n.message,console.log(e)}finally{r.value=!1,o.password=void 0,o.confirm=void 0}};return(a,s)=>{const n=R,e=P,c=k;return g(),_(A,null,{default:l(()=>[t(c,{class:"flex justify-start items-start w-full"},{default:l(()=>[t(e,{schema:B(h),state:o,onSubmit:v,class:"md:w-full flex flex-col mt-10 w-full overflow-y-auto justify-center items-center space-y-6 p-10 dark:bg-slate-800 bg-white shadow-2xl rounded-[8px] dark:border dark:border-gray-500"},{default:l(()=>[s[3]||(s[3]=d("div",{class:"self-start text-4xl font-semibold gap-2 flex flex-col"},[d("h1",{class:""},"Reset Password.")],-1)),i.value?(g(),_(C,{key:0,message:i.value},null,8,["message"])):N("",!0),t(p,{label:"Password",name:"password",required:"",type:"password",icon:"i-lucide-lock",placeholder:"************",modelValue:o.password,"onUpdate:modelValue":s[0]||(s[0]=m=>o.password=m)},null,8,["modelValue"]),t(p,{label:"Confirm Password",name:"confirm",required:"",type:"password",icon:"i-lucide-lock-keyhole",placeholder:"************",modelValue:o.confirm,"onUpdate:modelValue":s[1]||(s[1]=m=>o.confirm=m)},null,8,["modelValue"]),d("div",E,[d("div",L,[t(n,{"loading-icon":"i-lucide-loader-circle",disabled:r.value,loading:r.value,type:"submit",class:"self-end md:text-base text-sm bg-red-500 w-full"},{default:l(()=>s[2]||(s[2]=[S(" Change password")])),_:1},8,["disabled","loading"])])])]),_:1},8,["schema","state"])]),_:1})]),_:1})}}});export{I as default};
